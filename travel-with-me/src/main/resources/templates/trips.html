<!DOCTYPE html>
<html xmlns:sec="http://www.w3.org/1999/xhtml">
	<head>
		<title>
			Travel With Me
		</title>
			<link rel="stylesheet" href="/css/index.css" />
	</head>
	<body>
		<header>
			<nav>
				<div>
					<a href="/">Home</a>
				</div>
				<div sec:authorize="hasAuthority('ADMIN')">
					<a href="/admin/reservations"><button>All Reservations</button></a>
				</div>
				<div sec:authorize="hasAuthority('DEFAULT')">
					<a href="/myReservations"><button>My Reservations</button></a>
				</div>
				<div th:if="${userDetails}" class="login">
					<span th:text="${userDetails.username}"></span>
					<a href="/logout"><button>Logout</button></a>
				</div>
				<div th:unless="${userDetails}">
					<a href="/login"><button>Login</button></a>
				</div>
			</nav>
		</header>
		<section>
			<h1>Elenco Viaggi</h1>
			<div th:if="${trips==null || trips.isEmpty()}">Non ci sono viaggi nel sistema</div>
			<ul>
				<li th:each="trip : ${trips}">
						<div>
							------------------------------------------------------------
						</div>
						<div th:each="image: ${trip.images}">
            				<img th:src="@{'/image/' + ${image.id}}">
        				</div>
						<div>
							<span>Category: <span th:text="${trip.category}">...</span></span>
						</div>
						<div>
							<span>From: <span th:text="${trip.origin}">...</span></span>
						</div>
						<div>
							<span>To: <span th:text="${trip.destination}">...</span></span>
						</div>
						<div>
							<span>Departure date: <span th:text="${trip.departuredate}">...</span></span>
						</div>
						<div>
							<span>Return date: <span th:text="${trip.returndate}">...</span></span>
						</div>
						<div>
							<span>Price: <span th:text="${trip.price}">...</span></span><span> EUR</span>
						</div>
						<button>
							<a th:href="@{'/trip' + '/' + ${trip.id}}">Open for more details</a>
						</button>
						<div sec:authorize="hasAuthority('ADMIN')">
							<button>
               					<a th:href="@{'/admin/formUpdateTrip/' + ${trip.id}}">Update</a>
							</button>
							<button>
                       			<a th:href="@{'/admin/deleteTrip/' + ${trip.id}}">Delete</a>
                			</button>
						</div>
				</li>
			</ul>
		</section>
		<footer>
    		Made by MADALIN ALEXANDRU AVADANEI
  		</footer>
	</body>
</html>